name: Build and Deploy Docker Container

on:
  push:
    branches:
      - main  # ðŸš€ DÃ©clenchement automatique Ã  chaque commit sur `main`

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout du code source
        uses: actions/checkout@v3

      - name: Build du projet (compilation du JAR)
        run : mvn clean package -DskipTests  # ðŸ”¥ Compile l'application avant de crÃ©er lâ€™image Docker

      - name: Construire lâ€™image Docker
        run: docker build -t mon_app:latest .

      - name: Enregistrer lâ€™image Docker localement
        run: docker save -o mon_app.tar mon_app:latest

      - name: Charger lâ€™image sur Docker Desktop
        run:  docker load -i mon_app.tar
